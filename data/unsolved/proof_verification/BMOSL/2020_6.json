{
    "metadata": {
        "category": [],
        "competition": "bmo",
        "difficulty": 7.05,
        "level": "high_school",
        "source": "Balkan MO Shortlist",
        "url": "Private",
        "year": 2020
    },
    "problem": "Let \\( k \\) be a positive integer. Determine the least integer \\( n \\geq k+1 \\) for which the game below can be played indefinitely:\n\nConsider \\( n \\) boxes, labeled \\( b_{1}, b_{2}, \\ldots, b_{n} \\). For each index \\( i \\), box \\( b_{i} \\) contains initially exactly \\( i \\) coins. At each step, the following three substeps are performed in order:\n1. Choose \\( k+1 \\) boxes;\n2. Of these \\( k+1 \\) boxes, choose \\( k \\) and remove at least half of the coins from each, and add to the remaining box, if labeled \\( b_{i} \\), a number of \\( i \\) coins.\n3. If one of the boxes is left empty, the game ends; otherwise, go to the next step.",
    "problem_id": "BMOSL_2020_6",
    "solutions": [
        {
            "author": "Human",
            "solution": "Solution. The required minimum is $n=2^{k}+k-1$.\nIn this case the game can be played indefinitely by choosing the last $k+1$ boxes, $b_{2^{k}-1}, b_{2^{k}}, \\ldots, b_{2^{k}+k-1}$, at each step: At step $r$, if box $b_{2^{k}+i-1}$ has exactly $m_{i}$ coins, then $\\left\\lceil m_{i} / 2\\right\\rceil$ coins are removed from that box, unless $i \\equiv r-1(\\bmod k+1)$, in which case $2^{k}+i-1$ coins are added. Thus, after step $r$ has been performed, box $b_{2^{k}+i-1}$ contains exactly $\\left\\lfloor m_{i} / 2\\right\\rfloor$ coins, unless $i \\equiv r-1(\\bmod k+1)$, in which case it contains exactly $m_{i}+2^{k}+i-1$ coins. This game goes on indefinitely, since each time a box is supplied, at least $2^{k}-1$ coins are added, so it will then contain at least $2^{k}$ coins, good enough to survive the $k$ steps to its next supply.\n\nWe now show that no smaller value of $n$ works. So, let $n \\leqslant 2^{k}+k-2$ and suppose, if possible, that a game can be played indefinitely. Notice that a box currently containing exactly $m$ coins survives at most $w=\\left\\lfloor\\log _{2} m\\right\\rfloor$ withdrawals; this $w$ will be referred to as the weight of that box. The sum of the weigths of all boxes will referred to as the total weight. The argument hinges on the lemma below, proved at the end of the solution.\nLemma. Performing a step does not increase the total weight. Moreover, supplying one of the first $2^{k}-2$ boxes strictly decreases the total weight.\n\nSince the total weight cannot strictly decrease indefinitely, $n>2^{k}-2$, and from some stage on none of the first $2^{k}-2$ boxes is ever supplied. Recall that each step involves a $(k+1)$-box choice. Since $n \\leqslant 2^{k}+k-2$, from that stage on, each step involves a withdrawal from at least one of the first $2^{k}-2$ boxes. This cannot go on indefinitely, so the game must eventually come to an end, contradicting the assumption.\n\nConsequently, a game that can be played indefinitely requires $n \\geqslant 2^{k}+k-1$.\nProof of the Lemma. Since a withdrawal from a box decreases its weight by at least $1$, it is sufficient to show that supplying a box increases its weight by at most $k$; and if the latter is amongst the first $2^{k}-2$ boxes, then its weight increases by at most $k-1$. Let the box to be supplied be $b_{i}$ and let it currently contain exactly $m_{i}$ coins, to proceed by case analysis:\n\nIf $m_{i}=1$, the weight increases by $\\left\\lfloor\\log _{2}(i+1)\\right\\rfloor \\leqslant\\left\\lfloor\\log _{2}\\left(2^{k}+k-1\\right)\\right\\rfloor \\leqslant\\left\\lfloor\\log _{2}\\left(2^{k+1}-\\right.\\right.$ $2)\\rfloor \\leqslant k$; and if, in addition, $i \\leqslant 2^{k}-2$, then the weight increases by $\\left\\lfloor\\log _{2}(i+1)\\right\\rfloor \\leqslant$ $\\left\\lfloor\\log _{2}\\left(2^{k}-1\\right)\\right\\rfloor=k-1$.\n\nIf $m_{i}=2$, then the weight increases by $\\left\\lfloor\\log _{2}(i+2)\\right\\rfloor-\\left\\lfloor\\log _{2} 2\\right\\rfloor \\leqslant\\left\\lfloor\\log _{2}\\left(2^{k}+k\\right)\\right\\rfloor-1 \\leqslant$ $k-1$.\n\nIf $m_{i} \\geqslant 3$, then the weight increases by\n\n$$\n\\begin{aligned}\n\\left\\lfloor\\log _{2}\\left(i+m_{i}\\right)\\right\\rfloor-\\left\\lfloor\\log _{2} m_{i}\\right\\rfloor & \\leqslant\\left\\lfloor\\log _{2}\\left(i+m_{i}\\right)-\\log _{2} m_{i}\\right\\rfloor+1 \\\\\n& \\leqslant\\left\\lfloor\\log _{2}\\left(1+\\frac{2^{k}+k-2}{3}\\right)\\right\\rfloor+1 \\leqslant k\n\\end{aligned}\n$$\n\nsince $1+\\frac{1}{3}\\left(2^{k}+k-2\\right)=\\frac{1}{3}\\left(2^{k}+k+1\\right)<\\frac{1}{3}\\left(2^{k}+2^{k+1}\\right)=2^{k}$.\nFinally, let $i \\leqslant 2^{k}-2$ to consider the subcases $m_{i}=3$ and $m_{i} \\geqslant 4$. In the former subcase, the weight increases by\n\n$$\n\\left\\lfloor\\log _{2}(i+3)\\right\\rfloor-\\left\\lfloor\\log _{2} 3\\right\\rfloor \\leqslant\\left\\lfloor\\log _{2}\\left(2^{k}+1\\right)\\right\\rfloor-1=k-1,\n$$\nand in the latter by\n\\$\\$\\begin{aligned}\n\n\\left\\lfloor\\log _{2}\\left(i+m_{i}\\right)\\right\\rfloor-\\left\\lfloor\\log _{2} m_{i}\\right\\rfloor \\& \\leqslant\\left\\lfloor\\log _{2}\\left(i+m_{i}\\right)-\\log _{2} m_{i}\\right\\rfloor+1 <br>\n\\& \\leqslant\\left\\lfloor\\log _{2}\\left(1+\\frac{2^{k}-2}{4}\\right)\\right\\rfloor+1 \\leqslant k-1\n\n\\end{aligned}\\$\\$\nsince $1+\\frac{1}{4}\\left(2^{k}-2\\right)=\\frac{1}{4}\\left(2^{k}+2\\right)<2^{k-2}+1$. This ends the proof and completes the solution.",
            "images": {}
        }
    ],
    "grading_scheme": [
        {
            "part_id": 1,
            "title": "Correctness",
            "description": "<p>A solution should be considered correct even if it would earn 5+/7 points in a full grading. Examples of small penalties worth 1 point are if the solution: <ul><li>Makes a small computational mistake that can be easily fixed</li><li>Misses an edge case which can be easily proven/disproven</li><li>Skips over a step that follows without much reasoning or manual work</li></ul> A solution should be marked as incorrect if: <ul><li>It marks a step as trivial, if it is not immediately obvious why this would be the case</li><li>It omits algebra-heavy computational steps, regardless of whether or not it has outlined the methodology</li><li>Generalizes over a pattern without rigorously describing the pattern, or without proving any relevant properties.</li><li>It cites a non-existing or unpopular source/Theorem, which cannot be immediately found from searching for it online. Thus, any theorems that can be immediately found and have a Wikipedia article are allowed.</li></ul> The model has been specifically told that it should not skip steps or mark them as trivial. Any violation of this rule should be considered by assuming the model does not know how to derive the &quot;trivial&quot; step</p>",
            "points": 1
        }
    ],
    "points": 1,
    "date_added": "2025-06-02 21:45:56"
}