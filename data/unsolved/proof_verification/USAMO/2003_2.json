{
    "metadata": {
        "category": [],
        "competition": "usamo",
        "difficulty": 7.06,
        "level": "high_school",
        "source": "USAMO",
        "url": "https://web.evanchen.cc/problems.html",
        "year": 2003
    },
    "problem": "A convex polygon \\(\\mathcal{P}\\) in the plane is dissected into smaller convex polygons by drawing all of its diagonals. The lengths of all sides and all diagonals of the polygon \\(\\mathcal{P}\\) are rational numbers. Prove that the lengths of all sides of all polygons in the dissection are also rational numbers.",
    "problem_id": "USAMO_2003_2",
    "solutions": [
        {
            "author": "Human",
            "solution": "Suppose $A B$ is a side of a polygon in the dissection, lying on diagonal $X Y$, with $X, A$, $B, Y$ in that order. Then\n\n$$\nA B=X Y-X A-Y B\n$$\n\nIn this way, we see that it actually just suffices to prove the result for a quadrilateral.\nWe present two approaches to this end.\n\u0433\u0402\u0452 First approach (trig). Consider quadrilateral $A B C D$. There are twelve angles one can obtain using three of its four vertices, three at each vertex; denote this set of $12$ angles by $S$ Note that:\n\n- The law of cosines implies $\\cos \\theta \\in \\mathbb{Q}$ for each $\\theta \\in S$.\n- Hence, $(\\sin \\theta)^{2} \\in \\mathbb{Q}$ for $\\theta \\in S$. (This is because $\\sin \\theta^{2}+\\cos ^{2} \\theta$.)\n\nWe say two angles $\\theta_{1}$ and $\\theta_{2}$ are equivalent if $\\frac{\\sin \\theta_{1}}{\\sin \\theta_{2}}$ This is the same as saying, when $\\sin \\theta_{1}$ and $\\sin \\theta_{2}$ are written in simplest radical form, the part under the square root is the same.\n\nNow we contend:\nClaim - The angles $\\angle B A C, \\angle C A D, \\angle B A D$ are equivalent.\nProof. Note that\n\n$$\n\\mathbb{Q} \\ni \\cos (\\angle B A D)=\\cos \\angle B A C \\cos \\angle C A D-\\sin \\angle B A C \\sin \\angle C A D\n$$\nso $\\angle B A C$ and $\\angle C A D$ are equivalent. Then\n$$\n\\sin (\\angle B A D)=\\sin \\angle B A C \\cos \\angle C A D+\\cos \\angle B A C \\sin \\angle C A D\n$$\n\nimplies $\\angle B A D$ is equivalent to those two.\n\nClaim - The angles $\\angle B A D, \\angle D B A, \\angle A D B$ are equivalent.\nProof. Law of sines on $\\triangle B A D$.\nIterating the argument implies that all angles are equivalent.\nNow, if $A B$ and $C D$ meet at $E$, the law of sines on $\\triangle A E B$, etc. implies the result.\n\nI Second approach (barycentric coordinates). To do this, we apply barycentric coordinates. Consider quadrilateral $A B D C$ (note the changed order of vertices), with $A=(1,0,0), B=(0,1,0), C=(0,0,1)$. Let $D=(x, y, z)$, with $x+y+z=1$. By hypothesis, each of the numbers\n\n$$\n\\begin{aligned}\n-a^{2} y z+b^{2}(1-x) z+c^{2}(1-x) y & =A D^{2} \\\\\na^{2}(1-y) z+b^{2} z x+c^{2}(1-y) x & =B D^{2} \\\\\n-a^{2}(1-z) y-b^{2}(1-z) x+c^{2} x y & =C D^{2}\n\\end{aligned}\n$$\n\nis rational. Let $W=a^{2} y z+b^{2} z x+c^{2} x y$. Then,\n\n$$\n\\begin{aligned}\nb^{2} z+c^{2} y & =A D^{2}+W \\\\\na^{2} z+c^{2} x & =B D^{2}+W \\\\\na^{2} y+b^{2} x & =C D^{2}+W\n\\end{aligned}\n$$\n\nThis implies that $A D^{2}+B D^{2}+2 W-c^{2}=2 S_{C} z$ and cyclically (as usual $2 S_{C}=a^{2}+b^{2}-c^{2}$ ). If any of $S_{A}, S_{B}, S_{C}$ are zero, then we deduce $W$ is rational. Otherwise, we have that\n\n$$\n1=x+y+z=\\sum_{\\mathrm{cyc}} \\frac{A D^{2}+B D^{2}+2 W-c^{2}}{2 S_{C}}\n$$\nwhich implies that $W$ is rational, because it appears with coefficient $\\frac{1}{S_{A}}+\\frac{1}{S_{B}}+\\frac{1}{S_{C}} \\neq 0$ (since $S_{B C}+S_{C A}+S_{A B}$ is actually the area of $A B C$ ).\n\nHence from the rationality of $W$, we deduce that $x$ is rational as long as $S_{A} \\neq 0$, and similarly for the others. So at most one of $x, y, z$ is irrational, but since $x+y+z=1$ this implies they are all rational.\n\nFinally, if $P=\\overline{A D} \\cap \\overline{B C}$ then $A P=\\frac{1}{y+z} A D$, so $A P$ is rational too, completing the proof.\n\nRemark. After the reduction to quadrilateral, a third alternate approach goes by quoting Putnam $2018$ A6, reproduced below:\n\nFour points are given in the plane, with no three collinear, such that the squares of the $\\binom{4}{2}=6$ pairwise distances are all rational. Show that the ratio of the areas between any two of the $\\binom{4}{3}=4$ triangles determined by these points is also rational.\n\nIf $A B C D$ is the quadrilateral, the heights from $C$ and $D$ to $A B$ have rational ratio. Letting $P=A C \\cap B D$, we see $A P / A B$ can be shown as rational via coordinates, as needed.",
            "images": {}
        }
    ],
    "grading_scheme": [
        {
            "part_id": 1,
            "title": "Correctness",
            "description": "<p>A solution should be considered correct even if it would earn 5+/7 points in a full grading. Examples of small penalties worth 1 point are if the solution: <ul><li>Makes a small computational mistake that can be easily fixed</li><li>Misses an edge case which can be easily proven/disproven</li><li>Skips over a step that follows without much reasoning or manual work</li></ul> A solution should be marked as incorrect if: <ul><li>It marks a step as trivial, if it is not immediately obvious why this would be the case</li><li>It omits algebra-heavy computational steps, regardless of whether or not it has outlined the methodology</li><li>Generalizes over a pattern without rigorously describing the pattern, or without proving any relevant properties.</li><li>It cites a non-existing or unpopular source/Theorem, which cannot be immediately found from searching for it online. Thus, any theorems that can be immediately found and have a Wikipedia article are allowed.</li></ul> The model has been specifically told that it should not skip steps or mark them as trivial. Any violation of this rule should be considered by assuming the model does not know how to derive the &quot;trivial&quot; step</p>",
            "points": 1
        }
    ],
    "points": 1
}